<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Добыча токенов</title>
    <script src="https://cdn.jsdelivr.net/npm/tonweb@0.4.1/dist/tonweb.min.js"></script>
</head>
<body>
    <div id="status">Токены: 0</div>
    <button id="mineButton">Добыть токены</button>
    <button id="connectWallet">Подключить кошелек</button>
    <script>
        const tonweb = new TonWeb(); // Инициализируем TonWeb
        const contractAddress = 'YOUR_CONTRACT_ADDRESS'; // Адрес вашего контракта
        const tokenAddress = 'YOUR_TOKEN_ADDRESS'; // Адрес вашего токена
        const contractABI = [ /* ABI контракта */ ];
        let wallet;

        async function init() {
            // Подключение кошелька и настройка TonWeb
            if (window.ton) {
                wallet = new TonWeb.Wallets.WebWallet();
                await wallet.connect();
            } else {
                alert('Пожалуйста, установите кошелек Ton!');
            }
        }

        async function mineTokens() {
            if (wallet) {
                try {
                    const contract = new TonWeb.Contract(contractABI, contractAddress);
                    await contract.methods.mine().send({ from: wallet.address });
                    alert('Токены добыты!');
                } catch (error) {
                    console.error('Ошибка при добыче токенов:', error);
                }
            } else {
                alert('Не удалось подключиться к кошельку!');
            }
        }

        document.getElementById('connectWallet').addEventListener('click', init);
        document.getElementById('mineButton').addEventListener('click', mineTokens);
    </script>
</body>
</html>
